<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>YOURZOY 성향 테스트</title>
<style>
:root{
  --navy:#0B132B;--navy2:#1C2541;--gold:#FFD700;--text:#FFF;
}
body{
  margin:0;background:var(--navy);color:var(--text);
  font-family:"Noto Sans KR",sans-serif;
}
.wrap{
  max-width:580px;margin:5vh auto;padding:30px;
  border-radius:24px;background:var(--navy2);
  box-shadow:0 20px 60px rgba(0,0,0,.4);
}
h1{text-align:center;color:var(--gold);margin:0 0 8px;}
p{text-align:center;color:rgba(255,255,255,.75);}
.question{margin:30px 0;}
.question h3{color:var(--gold);font-size:17px;margin-bottom:14px;}
.options{display:flex;flex-direction:column;gap:8px;}
label{font-size:15px;}
input[type=radio]{margin-right:6px;}
button{
  margin-top:24px;width:100%;background:var(--gold);color:#111;
  padding:13px 16px;border:none;border-radius:14px;
  font-weight:800;cursor:pointer;
}
button:hover{filter:brightness(1.05);}
.progress{height:6px;background:rgba(255,215,0,.25);
  border-radius:4px;overflow:hidden;margin:16px 0;}
.progress-inner{height:6px;background:var(--gold);width:0;transition:.3s;}
footer{text-align:center;color:rgba(255,255,255,.45);font-size:12px;margin-top:20px;}
</style>
</head>

<body>
<main class="wrap">
  <h1>YOURZOY</h1>
  <p>30문항으로 당신의 성향을 분석합니다.<br>3분 내로 완료돼요 ⚡</p>
  <div class="progress"><div class="progress-inner" id="bar"></div></div>
  <div id="quiz"></div>
  <button id="next">다음</button>
  <footer>© 2025 YOURZOY</footer>
</main>

<script>
// ---------- 기본 세팅 ----------
const birthData = JSON.parse(localStorage.getItem("birthData") || "{}");
console.log("받은 데이터:", birthData);

// ---------- 질문 리스트 ----------
const Q = [
  {q:"나는 새로운 사람을 만날 때 에너지가 생긴다.",t:"E"},
  {q:"나는 직감적으로 미래를 예측하는 편이다.",t:"N"},
  {q:"나는 논리적 근거로 판단한다.",t:"T"},
  {q:"나는 계획을 세워 움직이는 걸 선호한다.",t:"J"},
  {q:"나는 혼자 있는 시간이 필요하다.",t:"I"},
  {q:"나는 감정 변화를 잘 인식한다.",t:"F"},
  {q:"나는 구체적인 사실에 집중한다.",t:"S"},
  {q:"나는 사람과의 관계를 중요시한다.",t:"F"},
  {q:"나는 즉흥적으로 결정을 내릴 때가 많다.",t:"P"},
  {q:"나는 큰 그림을 먼저 본다.",t:"N"},
  {q:"나는 감정보다는 사실을 택한다.",t:"T"},
  {q:"나는 정리정돈을 잘 한다.",t:"J"},
  {q:"나는 직관적으로 판단한다.",t:"N"},
  {q:"나는 다른 사람과 함께 있을 때 활력이 생긴다.",t:"E"},
  {q:"나는 데이터를 중시한다.",t:"T"},
  {q:"나는 감성적 자극에 영향을 받는다.",t:"F"},
  {q:"나는 디테일보다는 아이디어 중심이다.",t:"N"},
  {q:"나는 분위기 변화를 잘 감지한다.",t:"F"},
  {q:"나는 실용적이다.",t:"S"},
  {q:"나는 완벽을 추구한다.",t:"J"},
  {q:"나는 감각적인 경험을 선호한다.",t:"S"},
  {q:"나는 분석적이고 전략적이다.",t:"T"},
  {q:"나는 상황에 따라 유연하게 행동한다.",t:"P"},
  {q:"나는 직감으로 결정을 내린다.",t:"N"},
  {q:"나는 감정 표현이 솔직하다.",t:"F"},
  {q:"나는 새로운 아이디어를 즐긴다.",t:"N"},
  {q:"나는 사교적이다.",t:"E"},
  {q:"나는 계획대로 진행될 때 안정된다.",t:"J"},
  {q:"나는 즉흥적인 변화를 즐긴다.",t:"P"},
  {q:"나는 새로운 시도를 좋아한다.",t:"E"}
];

// ---------- 로직 ----------
let i=0;
let s={E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};
const quiz=document.getElementById("quiz");
const bar=document.getElementById("bar");

function drawQ(){
  const q=Q[i];
  quiz.innerHTML=`
    <div class="question">
      <h3>Q${i+1}. ${q.q}</h3>
      <div class="options">
        <label><input type="radio" name="a" value="1">전혀 아니다</label>
        <label><input type="radio" name="a" value="2">아니다</label>
        <label><input type="radio" name="a" value="3">보통이다</label>
        <label><input type="radio" name="a" value="4">그렇다</label>
        <label><input type="radio" name="a" value="5">매우 그렇다</label>
      </div>
    </div>`;
  bar.style.width=`${(i/Q.length)*100}%`;
}
drawQ();

// ---------- 다음 버튼 ----------
document.getElementById("next").onclick=()=>{
  const a=document.querySelector("input[name=a]:checked");
  if(!a)return alert("응답을 선택해주세요!");
  const val=parseInt(a.value);
  const type=Q[i].t;
  if(["E","N","T","J"].includes(type)) s[type]+=val;
  else s[type]+=6-val;
  i++;
  if(i<Q.length){drawQ();}
  else{
    const mbti=makeMBTI(s);
    const zone=toZone(mbti);
    localStorage.setItem("surveyType", JSON.stringify({mbti, zone}));
    window.location.href="result.html";
  }
};

// ---------- MBTI 생성 ----------
function makeMBTI(s){
  return (s.E>=s.I?"E":"I")+
         (s.S>=s.N?"S":"N")+
         (s.T>=s.F?"T":"F")+
         (s.J>=s.P?"J":"P");
}

// ---------- MBTI → Zone 변환 ----------
function toZone(m){
  if(["INTJ","INTP","ENTJ","ENTP"].includes(m))return "C-Zone";
  if(["INFJ","INFP","ENFJ","ENFP"].includes(m))return "B-Zone";
  if(["ISTJ","ISFJ","ESTJ","ESFJ"].includes(m))return "A-Zone";
  return "D-Zone";
}
</script>
</body>
</html>
