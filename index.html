<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>YOURZOY ì‚¬ì£¼ ë“±ë¡</title>
<style>
:root {--navy:#0B132B;--navy2:#1C2541;--gold:#FFD700;--text:#FFF;}
body{margin:0;background:var(--navy);color:var(--text);font-family:"Noto Sans KR",sans-serif;}
.wrap{max-width:520px;margin:6vh auto;padding:28px;border-radius:24px;background:var(--navy2);
box-shadow:0 18px 50px rgba(0,0,0,.4);}
h1{text-align:center;color:var(--gold);margin-bottom:4px;font-size:24px;}
p{text-align:center;color:rgba(255,255,255,.7);margin-bottom:24px;}
label{color:var(--gold);font-weight:700;font-size:14px;display:block;margin:10px 0 6px;}
input,select,button{width:100%;padding:13px;border:none;border-radius:12px;box-sizing:border-box;}
input,select{background:#0f1733;color:var(--text);border:1px solid rgba(255,215,0,.3);}
button{background:var(--gold);color:#111;font-weight:800;margin-top:18px;cursor:pointer;}
button:hover{filter:brightness(1.05);}
footer{text-align:center;color:rgba(255,255,255,.45);font-size:12px;margin-top:20px;}
</style>
</head>
<body>
<main class="wrap">
  <h1>YOURZOY</h1>
  <p>ìƒë…„ì›”ì¼ê³¼ ì‹œê°„ì„ ì…ë ¥í•˜ë©´ ë‹¹ì‹ ì˜ <b>ì¼ì£¼</b>ë¥¼ ì°¾ì•„ë“œë¦´ê²Œìš”.</p>
  <label>ìƒë…„ì›”ì¼</label>
  <input id="birthdate" type="date">
  <label>ì¶œìƒì‹œê°„</label>
  <select id="birthtime">
    <option value="0">ìì‹œ (23:00~00:59)</option>
    <option value="1">ì¶•ì‹œ (01:00~02:59)</option>
    <option value="2">ì¸ì‹œ (03:00~04:59)</option>
    <option value="3">ë¬˜ì‹œ (05:00~06:59)</option>
    <option value="4">ì§„ì‹œ (07:00~08:59)</option>
    <option value="5">ì‚¬ì‹œ (09:00~10:59)</option>
    <option value="6">ì˜¤ì‹œ (11:00~12:59)</option>
    <option value="7">ë¯¸ì‹œ (13:00~14:59)</option>
    <option value="8">ì‹ ì‹œ (15:00~16:59)</option>
    <option value="9">ìœ ì‹œ (17:00~18:59)</option>
    <option value="10">ìˆ ì‹œ (19:00~20:59)</option>
    <option value="11">í•´ì‹œ (21:00~22:59)</option>
  </select>
  <button id="next">ì„±í–¥ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
  <footer>Â© 2025 YOURZOY</footer>
</main>

<script>
// ======================== ë§Œì„¸ë ¥ ê³„ì‚° =========================
const stems=["ê°‘","ì„","ë³‘","ì •","ë¬´","ê¸°","ê²½","ì‹ ","ì„","ê³„"];
const branches=["ì","ì¶•","ì¸","ë¬˜","ì§„","ì‚¬","ì˜¤","ë¯¸","ì‹ ","ìœ ","ìˆ ","í•´"];

// ë³´ì •ëœ JD ê¸°ì¤€ì¼ (1984-02-03)
function JD(y,m,d){
  const a=Math.floor((14-m)/12);
  const y2=y+4800-a;
  const m2=m+12*a-3;
  return d+Math.floor((153*m2+2)/5)+365*y2+Math.floor(y2/4)-Math.floor(y2/100)+Math.floor(y2/400)-32045;
}
const BASE_JD=JD(1984,2,4);

// ì¼ì£¼ ê³„ì‚°
function getIlju(y,m,d){
  const diff=JD(y,m,d)-BASE_JD;
  const idx=(diff%60+60)%60;
  return stems[idx%10]+branches[idx%12];
}

// ë…„ì£¼/ì›”ì£¼ ê³„ì‚°
function getNyeonju(y){return stems[(y-4)%10]+branches[(y-4)%12];}
function getWolju(y,m){return stems[(y*12+m+3)%10]+branches[(m+1)%12];}

// ì‹œì£¼ ê³„ì‚°
function getSiju(ilGan,h){
  const hourMap=["ì","ì¶•","ì¸","ë¬˜","ì§„","ì‚¬","ì˜¤","ë¯¸","ì‹ ","ìœ ","ìˆ ","í•´"];
  const ji=hourMap[Math.floor((h+3)/2)%12];
  const ganStart={"ê°‘":0,"ê¸°":0,"ì„":2,"ë³‘":4,"ë¬´":4,"ì •":6,"ê¸°":6,"ê²½":8,"ì‹ ":10,"ì„":0,"ê³„":2};
  const ganIdx=(ganStart[ilGan]+Math.floor((h+3)/2))%10;
  return stems[ganIdx]+ji;
}

function getFourPillars(y,m,d,h){
  const yearP=getNyeonju(y);
  const monthP=getWolju(y,m);
  const dayP=getIlju(y,m,d);
  const hourP=getSiju(dayP[0],h);
  return {yearP,monthP,dayP,hourP};
}

// ======================== ì˜¤í–‰/ë™ë¬¼ ë§¤í•‘ =========================
const elementMap = {
  "ê°‘": {elem:"ëª©", color:"ì´ˆë¡"},
  "ì„": {elem:"ëª©", color:"ì´ˆë¡"},
  "ë³‘": {elem:"í™”", color:"ë¹¨ê°•"},
  "ì •": {elem:"í™”", color:"ë¹¨ê°•"},
  "ë¬´": {elem:"í† ", color:"ë…¸ë‘"},
  "ê¸°": {elem:"í† ", color:"ë…¸ë‘"},
  "ê²½": {elem:"ê¸ˆ", color:"íšŒìƒ‰"},
  "ì‹ ": {elem:"ê¸ˆ", color:"íšŒìƒ‰"},
  "ì„": {elem:"ìˆ˜", color:"íŒŒë‘"},
  "ê³„": {elem:"ìˆ˜", color:"íŒŒë‘"}
};
const animalMap = {
  "ì":"ì¥","ì¶•":"ì†Œ","ì¸":"í˜¸ë‘ì´","ë¬˜":"í† ë¼","ì§„":"ìš©","ì‚¬":"ë±€",
  "ì˜¤":"ë§","ë¯¸":"ì–‘","ì‹ ":"ì›ìˆ­ì´","ìœ ":"ë‹­","ìˆ ":"ê°œ","í•´":"ë¼ì§€"
};

// ======================== ì‹¤í–‰ ë¡œì§ =========================
document.getElementById("next").addEventListener("click",()=>{
  const dateStr=document.getElementById("birthdate").value;
  if(!dateStr)return alert("ìƒë…„ì›”ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
  const [y,m,d]=dateStr.split("-").map(n=>parseInt(n,10));
  const h=parseInt(document.getElementById("birthtime").value);
  const pillars=getFourPillars(y,m,d,h);

  const ilGan=pillars.dayP[0];
  const ilJi=pillars.dayP[1];
  const elem=elementMap[ilGan].elem;
  const color=elementMap[ilGan].color;
  const animal=animalMap[ilJi];
  const iljuName=`${color} ${animal}`; // ğŸ”´ğŸ€ ë¹¨ê°„ì¥

  const birthData={...pillars, elem, color, animal, iljuName};
  localStorage.setItem("birthData", JSON.stringify(birthData));

  // ë””ë²„ê·¸ìš© ì½˜ì†” í™•ì¸
  console.log(birthData);

  // ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™
  window.location.href="survey.html";
});
</script>
</body>
</html>

