<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>YOURZOY ë¦¬í¬íŠ¸ ì„ íƒ</title>
<style>
:root{
  --navy:#0B132B;--navy2:#1C2541;--gold:#FFD700;--text:#FFF;
}
body{
  margin:0;background:var(--navy);color:var(--text);
  font-family:"Noto Sans KR",sans-serif;
}
.wrap{
  max-width:640px;margin:6vh auto;padding:32px;
  border-radius:24px;background:var(--navy2);
  box-shadow:0 20px 60px rgba(0,0,0,.4);
}
h1{text-align:center;color:var(--gold);margin-bottom:8px;}
p{text-align:center;color:rgba(255,255,255,.7);}
.user-info{
  background:#0f1733;border:1px solid rgba(255,215,0,.25);
  border-radius:14px;padding:16px;text-align:center;margin:20px 0;
}
.user-info b{color:var(--gold);}
.card{
  background:#0f1733;padding:24px;margin:16px 0;
  border:1px solid rgba(255,215,0,.25);
  border-radius:16px;
  transition:transform .2s ease, box-shadow .2s ease;
  cursor:pointer;
}
.card:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(255,215,0,.1);}
h2{color:var(--gold);margin-bottom:6px;font-size:18px;}
.price{color:#FFD700;font-weight:800;margin-top:6px;}
.desc{font-size:14px;line-height:1.6;color:rgba(255,255,255,.8);}
button{
  width:100%;padding:13px;margin-top:18px;
  border:none;border-radius:14px;background:var(--gold);
  color:#111;font-weight:800;cursor:pointer;
}
button:hover{filter:brightness(1.05);}
footer{text-align:center;color:rgba(255,255,255,.45);font-size:12px;margin-top:24px;}
.highlight{color:var(--gold);font-weight:700;}
</style>
</head>

<body>
<main class="wrap">
  <h1>YOURZOY ë¦¬í¬íŠ¸ ì„ íƒ</h1>
  <p>ë‹¹ì‹ ì˜ ì‚¬ì£¼ì™€ ì„±í–¥ì„ ê¸°ë°˜ìœ¼ë¡œ <b class="highlight">ë¦¬í¬íŠ¸</b>ë¥¼ ë°œì†¡í•´ë“œë¦½ë‹ˆë‹¤.<br>ì›í•˜ëŠ” ë¦¬í¬íŠ¸ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>

  <div class="user-info" id="userInfo">
    <!-- ì‚¬ì£¼ + MBTI ì •ë³´ í‘œì‹œ ì˜ì—­ -->
  </div>

  <div class="card" id="mini" onclick="goPay('mini')">
    <h2>ğŸ”¸ Mini ë¦¬í¬íŠ¸ (â‚©3,900)</h2>
    <p class="desc">
      â€¢ ì´ë²ˆ ë‹¬ TOP3 ì£¼ì˜ì‚¬í•­<br>
      â€¢ ê°œì¸ ê¸ˆê¸°ì‹œê°„ + ëŒ€ì²´ í–‰ë™<br>
      â€¢ ì§§ê³  ê°„ê²°í•œ ë¦¬ë§ˆì¸ë” ì¹´ë“œ (PNG)
    </p>
    <p class="price">ì†Œìš”: ì•½ 30ì´ˆ / ìë™ ë°œì†¡</p>
  </div>

  <div class="card" id="main" onclick="goPay('main')">
    <h2>ğŸ’  Main ë¦¬í¬íŠ¸ (â‚©19,800)</h2>
    <p class="desc">
      â€¢ ê´€ê³„ / ëˆ / íƒ€ì´ë° / ì •ì„œ 4ì¶• <b>RI ì§€ìˆ˜</b> ë¶„ì„<br>
      â€¢ ì‹¤ì œ ë¦¬ìŠ¤í¬ í¬ì¸íŠ¸ + í–‰ë™ ì²˜ë°©<br>
      â€¢ ì¸ìŠ¤íƒ€ ê³µìœ ìš© ìš”ì•½ ì¹´ë“œ í¬í•¨
    </p>
    <p class="price">ì†Œìš”: ì•½ 1ë¶„ / ìë™ ë°œì†¡</p>
  </div>

  <div class="card" id="premium" onclick="goPay('premium')">
    <h2>ğŸ‘‘ Premium ë¦¬í¬íŠ¸ (â‚©29,800)</h2>
    <p class="desc">
      â€¢ ì—°ë§ ì´ì •ë¦¬ + ë‹¤ìŒ í•´ ì¤€ë¹„ ë¡œë“œë§µ<br>
      â€¢ ê¸ˆì „/ê´€ê³„/ê¸°íšŒìš´ ì‹œì ë³„ ì˜ˆì¸¡<br>
      â€¢ ë§ì¶¤í˜• ë¦¬ìŠ¤í¬ ëŒ€ì²´ í–‰ë™ 3ì„¸íŠ¸ í¬í•¨
    </p>
    <p class="price">ì†Œìš”: ì•½ 2ë¶„ / ìë™ ë°œì†¡</p>
  </div>

  <button onclick="location.href='index.html'">ì²˜ìŒìœ¼ë¡œ</button>
  <footer>Â© 2025 YOURZOY</footer>
</main>

<script>
// ===============================
// 1ï¸âƒ£ URLë¡œ ì „ë‹¬ëœ ë°ì´í„° ìˆ˜ì‹ 
// ===============================
const params = new URLSearchParams(window.location.search);
let decodedData = null;

try {
  decodedData = JSON.parse(decodeURIComponent(params.get("data")));
} catch(e) {
  console.warn("ë°ì´í„° ì—†ìŒ ë˜ëŠ” íŒŒì‹± ì˜¤ë¥˜", e);
}

if (decodedData && decodedData.birth && decodedData.survey) {
  const b = decodedData.birth;
  const s = decodedData.survey;
  const infoHTML = `
    <p><b>${b.color} ${b.animal} JOY</b> Â· ${s.mbti} Â· ${s.zone}</p>
    <small>${b.yearP} / ${b.monthP} / ${b.dayP} / ${b.hourP}</small>
  `;
  document.getElementById("userInfo").innerHTML = infoHTML;
} else {
  document.getElementById("userInfo").innerHTML = `
    âš ï¸ ë°ì´í„°ê°€ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.<br>
    <small>ê²°ê³¼ í˜ì´ì§€ì—ì„œ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</small>`;
}

// ===============================
// 2ï¸âƒ£ ë¦¬í¬íŠ¸ ì„ íƒ â†’ ê²°ì œ ì—°ê²°
// ===============================
const TALLY_LINKS = {
  mini: "https://tally.so/r/mini-yourzoy",
  main: "https://tally.so/r/main-yourzoy",
  premium: "https://tally.so/r/premium-yourzoy"
};

function goPay(type){
  const link = TALLY_LINKS[type] || "#";
  const data = decodedData || {};
  const send = {
    ilju: data.birth?.iljuName,
    elem: data.birth?.elem,
    color: data.birth?.color,
    animal: data.birth?.animal,
    mbti: data.survey?.mbti,
    zone: data.survey?.zone,
    report: type
  };

  if(link === "#"){
    alert("âš ï¸ ê²°ì œ í˜ì´ì§€ê°€ ì•„ì§ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
    return;
  }

  // âœ… ê²°ì œ í˜ì´ì§€ ì´ë™ (ë°ì´í„° í¬í•¨)
  const encoded = encodeURIComponent(JSON.stringify(send));
  window.location.href = link + `?data=${encoded}`;
}
</script>
</body>
</html>
